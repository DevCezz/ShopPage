CREATE SCHEMA AITSI AUTHORIZATION sa;

CREATE TABLE IF NOT EXISTS AITSI.USERS (
  USERNAME      		VARCHAR(50) NOT NULL PRIMARY KEY,
  PASSWORD	        CHAR(68) NOT NULL,
  ENABLED           INT NOT NULL
);

CREATE TABLE IF NOT EXISTS AITSI.AUTHORITIES (
  USERNAME		              VARCHAR(50) NOT NULL,
  FOREIGN KEY (USERNAME)		REFERENCES AITSI.USERS (USERNAME),
  AUTHORITY				    	    VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS AITSI.PRODUCT_TYPE (
  PRODUCT_TYPE_ID		IDENTITY NOT NULL PRIMARY KEY,
  NAME				    	VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS AITSI.PRODUCT (
  PRODUCT_ID  					        	IDENTITY NOT NULL PRIMARY KEY,
  PRODUCER				  	        		VARCHAR(50) NOT NULL,
  MODEL					    		        	VARCHAR(50) NOT NULL,
  DESCRIPTION 					        	VARCHAR(1000),
  PRIZE		  				  	         	DECIMAL(12,2) NOT NULL,
  PRODUCT_TYPE_ID 					      LONG NOT NULL,
  FOREIGN KEY (PRODUCT_TYPE_ID)		REFERENCES AITSI.PRODUCT_TYPE (PRODUCT_TYPE_ID) 
);

CREATE TABLE IF NOT EXISTS AITSI.PRODUCT_COUNT (
  PRODUCT_ID	              	IDENTITY NOT NULL PRIMARY KEY,
  FOREIGN KEY (PRODUCT_ID)		REFERENCES AITSI.PRODUCT (PRODUCT_ID),
  AVAILABLE_AMOUNT            INTEGER NOT NULL,
  PEOPLE_BOUGHT               INTEGER NOT NULL,
  ITEM_BOUGHT                 INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS AITSI.ORDERS (
  ORDER_ID      		          IDENTITY NOT NULL PRIMARY KEY,
  PRODUCT_ID	                LONG NOT NULL,
  FOREIGN KEY (PRODUCT_ID)		REFERENCES AITSI.PRODUCT (PRODUCT_ID),
  AMOUNT                      INT NOT NULL,
  DATE                        TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CUSTOMER_FIRST_NAME         VARCHAR(50) NOT NULL,
  CUSTOMER_LAST_NAME          VARCHAR(50) NOT NULL,
  ADDRESS                     VARCHAR(250) NOT NULL,
  EMAIL                       VARCHAR(50) NOT NULL,
  USER          		          VARCHAR(50) NOT NULL
);
